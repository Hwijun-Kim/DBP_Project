<!DOCTYPE html>
<html lang="en" id="pj_html">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="public/css/pj_css.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro&display=swap" rel="stylesheet">
    <script src="https://kit.fontawesome.com/f6319e9033.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
</head>

<body id="pj_body">
    
    
    <section class="contents-wrap">
        
        <div class="con_title-group">
            <div class="con-title">
                직원 검색
                <div class="close close2"></div>
            </div>
            </div>
        
        <div class="basic-group">
            <div class="btn-group">
                <div class="btn-right-group" style="flex-wrap : wrap; justify-content:flex-end; gap: 3px;">
                    
                    <input class="btn-basic btn-gray" type="button" value="경력 및 기술"  id = 'search1' onclick="changeTableContent1()">
                    <input class="btn-basic btn-gray" type="button" value="프로젝트 마감일" id = 'search2' onclick="changeTableContent2()">
                    <input class="btn-basic btn-gray" type="button" value="평가 점수" id = 'search3' onclick="changeTableContent3()">   
                    
                </div>
            </div>
        </div>
        <div class="basic-group">
            <div class="card-item basic">
                <div id="result">
                    <div class="read-table">
                        <div class="horizontal-scroller">
                            <table class="index_table" id="projectTable">
                            
                                <thead>
                                    <tr>
                                        <th>직원 번호</th>
                                        <th>직원 이름</th>
                                        <th>경력</th>
                                        <th>사용 가능 기술</th>
                                        
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- 내용 -->
                                </tbody>
                                
                            </table>
                            <script>
                                // 직원 경력 및 기술 검색 -> default값으로 설정
                                window.addEventListener('DOMContentLoaded', function () {
                                    changeTableContent1();
                                });
                                // 직원 경력 및 기술 검색
                                function changeTableContent1() {
                                    var table = document.getElementById("projectTable");
                                    var thead = table.querySelector("thead");
                                    thead.innerHTML = `
                                        <tr>
                                            <th>직원 번호</th>
                                            <th>직원 이름</th>
                                            <th>경력</th>
                                            <th>사용 가능 기술</th>
                                        </tr>
                                    `;
                                    axios.get('/project/putEmployee/career')
                                        .then(function (response) {
                                            
                                            var table = document.getElementById("projectTable");
                                            var tbody = table.querySelector("tbody");
                                            tbody.innerHTML = '';
                        
                                            // 받아온 데이터를 테이블에 추가
                                            //console.log(response.data.result)
                                            //console.log("============")

                                            var employees = response.data.result;
                                            
                                            employees.forEach(function (employee) {
                                                var row = document.createElement("tr");
                                                
                                                var idCell = document.createElement("td");
                                                var nameCell = document.createElement("td");
                                                var careerCell = document.createElement("td");
                                                var skillsCell = document.createElement("td");
                        
                                                idCell.innerText = employee.e_id;
                                                nameCell.innerText = employee.e_name;
                                                careerCell.innerText = employee.career;
                                                skillsCell.innerText = employee.skills;
                        
                                                row.appendChild(idCell);
                                                row.appendChild(nameCell);
                                                row.appendChild(careerCell);
                                                row.appendChild(skillsCell);
                        
                                                tbody.appendChild(row);
                                            });
                                        })
                                        .catch(function (error) {
                                            console.log(error);
                                        });
                                }
                                // 프로젝트 마감일 최신순 검색
                                function changeTableContent2() {
                                    var table = document.getElementById("projectTable");
                                    var thead = table.querySelector("thead");
                                    thead.innerHTML = `
                                        <tr>
                                            <th>직원 번호</th>
                                            <th>직원 이름</th>
                                            <th>참여 프로젝트명</th>
                                            <th>프로젝트 시작일</th>
                                            <th>프로젝트 마감일</th>
                                        </tr>
                                    `;
                                    axios.get('/project/putEmployee/deadline')
                                        .then(function (response) {
                                            
                                            var table = document.getElementById("projectTable");
                                            var tbody = table.querySelector("tbody");
                                            tbody.innerHTML = '';
                        
                                            // 받아온 데이터를 테이블에 추가
                                            //console.log(response.data.result)
                                            //console.log("============")

                                            var employees = response.data.result;
                                            
                                            employees.forEach(function (employee) {
                                                var row = document.createElement("tr");

                                                var idCell = document.createElement("td");
                                                var nameCell = document.createElement("td");
                                                var projectnameCell = document.createElement("td");
                                                var startdateCell = document.createElement("td");
                                                var deadlineCell = document.createElement("td");
                                                
                        
                                                idCell.innerText = employee.e_id;
                                                nameCell.innerText = employee.e_name;
                                                projectnameCell.innerText = employee.p_name;
                                                startdateCell.innerText = employee.start_date;
                                                deadlineCell.innerText = employee.dead_line;
                        
                                                row.appendChild(idCell);
                                                row.appendChild(nameCell);
                                                row.appendChild(projectnameCell);
                                                row.appendChild(startdateCell);
                                                row.appendChild(deadlineCell);
                        
                                                tbody.appendChild(row);
                                            });
                                        })
                                        .catch(function (error) {
                                            console.log(error);
                                        });
                                }
                                // 직원 경력 및 기술 검색
                                function changeTableContent3() {
                                    var table = document.getElementById("projectTable");
                                    var thead = table.querySelector("thead");
                                    thead.innerHTML = `
                                        <tr>
                                            <th>직원 번호</th>
                                            <th>직원 이름</th>
                                            <th>업무 수행 능력 평점</th>
                                            <th>커뮤니케이션 능력 평점</th>
                                        </tr>
                                    `;
                                    axios.get('/project/putEmployee/career')
                                        .then(function (response) {
                                            
                                            var table = document.getElementById("projectTable");
                                            var tbody = table.querySelector("tbody");
                                            tbody.innerHTML = '';
                        
                                            // 받아온 데이터를 테이블에 추가
                                            //console.log(response.data.result)
                                            //console.log("============")

                                            var employees = response.data.result;
                                            
                                            employees.forEach(function (employee) {
                                                var row = document.createElement("tr");
                                                
                                                var idCell = document.createElement("td");
                                                var nameCell = document.createElement("td");
                                                var careerCell = document.createElement("td");
                                                var skillsCell = document.createElement("td");
                        
                                                idCell.innerText = employee.e_id;
                                                nameCell.innerText = employee.e_name;
                                                careerCell.innerText = employee.career;
                                                skillsCell.innerText = employee.skills;
                        
                                                row.appendChild(idCell);
                                                row.appendChild(nameCell);
                                                row.appendChild(careerCell);
                                                row.appendChild(skillsCell);
                        
                                                tbody.appendChild(row);
                                            });
                                        })
                                        .catch(function (error) {
                                            console.log(error);
                                        });
                                }
                            </script>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="con-title2">
            직무 선택
        </div>

        <div class="basic-group">
            <div class="card-item basic">
                <div id="emp_div">
               <label>클릭된 직원명</label>&nbsp;&nbsp;&nbsp;
               <select name="employee" id="employee">
                <option value="job">직무</option>
                <option value="PM">PM</option>
                <option value="BE">BE</option>
                <option value="FE">FE</option>
                <option value="ML">ML</option>
                
               </select>
               <input type="button" value="삭제" id="emp_bt">

            </div>

            <div id="emp_div">
            
               <label>클릭된 직원명</label>&nbsp;&nbsp;&nbsp;
               <select name="employee" id="employee" >
                <option value="job">직무</option>
                <option value="PM">PM</option>
                <option value="BE">BE</option>
                <option value="FE">FE</option>
                <option value="ML">ML</option>
                
               </select>
               <input type="button" value="삭제" id="emp_bt">
             
             </div>
             <div id="emp_div">
               <label>클릭된 직원명</label>&nbsp;&nbsp;&nbsp;
               <select name="employee" id="employee">
                <option value="job">직무</option>
                <option value="PM">PM</option>
                <option value="BE">BE</option>
                <option value="FE">FE</option>
                <option value="ML">ML</option>
                
               </select>
               <input type="button" value="삭제" id="emp_bt">
            </div>


               <div id="emp_div">
               
               <label>클릭된 직원명</label>&nbsp;&nbsp;&nbsp;
               <select name="employee" id="employee">
                <option value="job">직무</option>
                <option value="PM">PM</option>
                <option value="BE">BE</option>
                <option value="FE">FE</option>
                <option value="ML">ML</option>
                
               </select>
               <input type="button" value="삭제" id="emp_bt">
            </div>
             
            
            </div>
        </div>
        
           
        <div class="basic-group">
            <div class="btn-group">
                <div class="btn-right-group" style="flex-wrap : wrap; justify-content:flex-end; gap: 3px;">
                    
                    <input class="btn-basic2 btn-gray" type="button" value="취소">
                    <input class="btn-basic2 btn-gray" type="button" value="추가">
                    
                    
                </div>
            </div>
        </div>
       
        
    </section>

    
    
</body>

</html>